 var budgetHeader = (await _repo.GetBudgetHeader(_user.AccountId, request.BudgetHeaderId)).First();
            var budgetDetails = (await _repo.GetBudgetDetails(_user.AccountId, request.BudgetHeaderId)).ToList();
            var transactions = await _repo.GetTransactionsByAccountId(_user.AccountId, budgetHeader.StartDate, budgetHeader.EndDate);
            var categories = (await _repo.GetCategoriesByAccountId(_user.AccountId)).ToList();
            var subCats = (await _repo.GetSubCategoriesByAccountId(_user.AccountId)).ToList();

            var returnObject = new Result();
            foreach (var transaction in transactions)
            {
                returnObject.Amount += transaction.Amount;

                var subCat = subCats.FirstOrDefault(x => x.SubCategoryId == transaction.SubCategoryId);
                var cat = categories.FirstOrDefault(x => x.CategoryId == subCat?.CategoryId);

                var catRoll = returnObject.Summary.FirstOrDefault(x => x.CategoryId == cat?.CategoryId);
                if (catRoll == null)
                {
                    returnObject.Summary.Add(new Result.CategoryRoll
                    {
                        Category = cat.CategoryName,
                        Amount = transaction.Amount,
                        CategoryId = cat.CategoryId,
                        SubCategories = new List<Result.SubCategoryRoll>
                        {
                            new Result.SubCategoryRoll
                            {
                                SubCategoryId = subCat.SubCategoryId,
                                SubCategory = subCat.SubCategoryName,
                                Amount = transaction.Amount,
                                Transactions = new List<Result.Transaction>
                                {
                                    new Result.Transaction
                                    {
                                        Amount = transaction.Amount,
                                        BankAccount = transaction.BankAccount,
                                        TransactionDate = transaction.TransactionDate,
                                        TransactionDescription = transaction.TransactionDescription,
                                        TransactionId = transaction.TransactionId
                                    }
                                }
                            }
                        }
                    });
                }
                else
                {
                    catRoll.Amount += transaction.Amount;
                    var subCatRoll =
                        catRoll.SubCategories.FirstOrDefault(x => x.SubCategoryId == subCat?.SubCategoryId);
                    if (subCatRoll == null)
                    {
                        catRoll.SubCategories.Add(new Result.SubCategoryRoll
                        {
                            SubCategoryId = subCat.SubCategoryId,
                            SubCategory = subCat.SubCategoryName,
                            Amount = transaction.Amount,
                            Transactions = new List<Result.Transaction>
                            {
                                new Result.Transaction
                                {
                                    Amount = transaction.Amount,
                                    BankAccount = transaction.BankAccount,
                                    TransactionDate = transaction.TransactionDate,
                                    TransactionDescription = transaction.TransactionDescription,
                                    TransactionId = transaction.TransactionId
                                }
                            }
                        });
                    }
                    else
                    {
                        subCatRoll.Amount += transaction.Amount;
                        subCatRoll.Transactions.Add(
                            new Result.Transaction
                            {
                                Amount = transaction.Amount,
                                BankAccount = transaction.BankAccount,
                                TransactionDate = transaction.TransactionDate,
                                TransactionDescription = transaction.TransactionDescription,
                                TransactionId = transaction.TransactionId
                            });
                    }
                }

            }

            return returnObject;